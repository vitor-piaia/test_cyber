# Test Cyber

## üöÄ Project Configuration

### Prerequisites
- Docker
- Docker Compose

### Installation

1. Open project directory:
   ```bash
   cd test_cyber
   ```

2. Copy the file example `.env`:
   ```bash
   cp .env.example .env
   ```
   
3. Configure the `.env` file:
- Uncomment the database information and add:
  ```env
  DB_CONNECTION=pgsql
  DB_HOST=db_postgres
  DB_PORT=5432
  DB_DATABASE=laravel
  DB_USERNAME=sail
  DB_PASSWORD=password
  
  OCTANE_SERVER=frankenphp
  OCTANE_HTTPS=false
  
  SHODAN_BASE_URL=https://api.shodan.io
  SHODAN_API_KEY=[your_api_key]
  SHODAN_TIMEOUT=10
  ```

4. Up the project containers:
   ```bash
   docker-compose up -d --build
   ```

5. Access Laravel container:
   ```bash
   docker exec -it test_cyber-laravel_app-1 bash
   ```

6. Install the PHP dependencies:
   ```bash
   composer install
   ```

7. Generate the application keys and API documentation:
   ```bash
   php artisan key:generate
   php artisan l5-swagger:generate
   ```


8. Run the optimization and database commands:
   ```bash
   composer dump
   php artisan optimize
   php artisan migrate
   ```

9. Correct the permissions for the `storage/` folder inside the container:
   ```bash
   chown -R www-data:www-data storage/
   ```

10. Leave the queue running to obtain metadata from Shodan:
   ```bash
   php artisan queue:work --queue=shodan
   ```

---

## üìñ API Documentation

After uploading the project, access the API documentation generated by Swagger at:
```
http://localhost:8000/api/documentation
```

---

## üõ†Ô∏è Useful commands

- Up containers:
  ```bash
  docker-compose up -d --build
  ```

- Access container Laravel:
  ```bash
  docker exec -it laravel bash
  ```

- Stop containers:
  ```bash
  docker-compose down
  ```
---

## üìñ Collection Postman

The Postman collection with the pre-built routes has been added to the project.
Import the test_cyber.postman_collection.json file into Postman to use it.
